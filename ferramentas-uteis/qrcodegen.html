<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerador de QR Code | toskopado.site</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.1/build/qrcode.min.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap');

        body {
            font-family: 'Poppins', sans-serif;
            background-color: #000;
            background-image:
                radial-gradient(circle at 50% 50%, rgba(80,80,80,0.2) 1px, transparent 1px),
                radial-gradient(circle at 50% 50%, rgba(120,120,120,0.1) 1px, transparent 1px);
            background-size: 40px 40px, 80px 80px;
            animation: moveBG 10s linear infinite;
            overflow: hidden;
            height: 100vh;
        }

        @keyframes moveBG {
            0% { background-position: 0 0, 0 0; }
            100% { background-position: 40px 40px, 80px 80px; }
        }

        .link-item {
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .link-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
        }

        .menu-btn {
            position: fixed;
            top: 16px;
            left: 16px;
            width: 32px;
            height: 24px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            z-index: 10;
        }
        .menu-btn span {
            display: block;
            height: 3px;
            background: #e5e7eb;
            border-radius: 999px;
        }

        .hacker-text {
            position: fixed;
            color: rgba(220, 220, 220, 0.7);
            pointer-events: none;
            z-index: -1;
            font-family: monospace;
            font-size: 18px;
            font-weight: bold;
            text-shadow: 0 0 5px rgba(255,255,255,0.5);
        }
        .hacker-text.glow {
            color: rgba(255,255,255,0.95);
            text-shadow: 0 0 10px rgba(210,210,210,0.85),
                         0 0 20px rgba(170,170,170,0.7);
        }

        .fall-down { animation: fallDown linear forwards; }
        .fall-up   { animation: fallUp linear forwards; }
        .fall-left { animation: fallLeft linear forwards; }
        .fall-right{ animation: fallRight linear forwards; }

        @keyframes fallDown { to { transform: translateY(100vh); } }
        @keyframes fallUp   { to { transform: translateY(-100vh); } }
        @keyframes fallLeft { to { transform: translateX(-100vw); } }
        @keyframes fallRight{ to { transform: translateX(100vw); } }

        canvas { image-rendering: pixelated; }
    </style>
</head>
<body class="text-gray-200 flex flex-col items-center justify-center p-4">

    <a href="https://toskopado.site/ferramentas-uteis/" class="menu-btn" title="Voltar">
        <span></span><span></span><span></span>
    </a>

    <div class="w-full max-w-md mx-auto">
        <h1 class="text-3xl font-bold mb-6 text-center">Gerador de QR Code</h1>

        <div id="generateArea">
            <div class="bg-gray-900/80 border border-gray-700 rounded-lg p-4 mb-4 shadow-lg space-y-3">
                <p class="text-xs uppercase tracking-wide text-gray-500 mb-1">Conteúdo do QR Code</p>
                <input
                    id="qrText"
                    type="text"
                    placeholder="Cole aqui o link ou texto..."
                    class="w-full bg-gray-800/80 border border-gray-700 rounded-md px-3 py-2 text-sm text-gray-100 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
            </div>

            <div class="flex gap-3 mb-4">
                <button
                    id="btnGerar"
                    class="link-item flex-1 flex items-center justify-center gap-2 py-3 px-4 rounded-lg bg-gray-800 hover:bg-gray-700 border border-gray-600 font-medium transition">
                    <i class="fas fa-qrcode"></i>
                    <span>Gerar QR Code</span>
                </button>
            </div>
        </div>

        <div class="flex flex-col items-center">
            <div class="bg-gray-900/80 border border-gray-800 rounded-xl p-4 flex items-center justify-center min-h-[220px]">
                <canvas id="qrCanvas" width="320" height="320" class="w-56 h-56 md:w-64 md:h-64"></canvas>
            </div>

            <button
                id="btnBaixar"
                class="link-item hidden mt-4 inline-flex items-center justify-center gap-2 py-3 px-5 rounded-lg bg-gray-900 hover:bg-gray-800 border border-gray-700 font-medium transition">
                <i class="fas fa-download"></i>
                <span>Baixar PNG</span>
            </button>

            <p id="statusMsg" class="text-center text-xs text-gray-500 mt-2 h-4"></p>
        </div>
    </div>

    <script>
        window.addEventListener('scroll', () => window.scrollTo(0, 0));

        const characters = '01ハッカー｡◕‿◕｡┐(´∀｀)┌ﾟ+*:;ﾟｲΣ◖⚆ᴥ⚆◗✖╰⋃╯⌐■-■';
        const directions = ['fall-down', 'fall-up', 'fall-left', 'fall-right'];

        function createHackerText() {
            const letter = document.createElement("div");
            const useGlow = Math.random() < 0.3;
            letter.className = `hacker-text ${directions[Math.floor(Math.random()*directions.length)]} ${useGlow ? "glow" : ""}`;
            letter.textContent = characters[Math.floor(Math.random() * characters.length)];
            letter.style.left = `${Math.random() * 100}vw`;
            letter.style.top = `${Math.random() * 100}vh`;
            letter.style.animationDuration = `${5 + Math.random() * 5}s`;
            letter.style.opacity = `${0.5 + Math.random() * 0.45}`;
            letter.style.transform = `rotate(${Math.random() * 360}deg)`;
            document.body.appendChild(letter);
            setTimeout(() => letter.remove(), 10000);
        }

        setInterval(() => {
            createHackerText();
            setTimeout(createHackerText, 100);
            setTimeout(createHackerText, 200);
        }, 300);

        const QR_SIZE = 320;
        const LOGO_URL = "https://dl.dropboxusercontent.com/scl/fi/zy78yy4aosfpctczzud08/1749569716497.jpeg?rlkey=arge6zrt04sw6qvrrx1euipg3&dl=0";

        const qrTextInput = document.getElementById("qrText");
        const btnGerar = document.getElementById("btnGerar");
        const btnBaixar = document.getElementById("btnBaixar");
        const statusMsg = document.getElementById("statusMsg");
        const canvas = document.getElementById("qrCanvas");
        const ctx = canvas.getContext("2d");
        const generateArea = document.getElementById("generateArea");

        function clearCanvas() {
            ctx.fillStyle = "#111827";
            ctx.fillRect(0, 0, QR_SIZE, QR_SIZE);
        }

        clearCanvas();

        async function gerarQRCode() {
            const text = qrTextInput.value.trim();
            statusMsg.textContent = "";
            btnBaixar.classList.add("hidden");

            if (!text) {
                statusMsg.textContent = "Digite um texto ou link.";
                return;
            }

            btnGerar.disabled = true;
            btnGerar.classList.add("opacity-60", "cursor-not-allowed");
            statusMsg.textContent = "Gerando QR Code...";

            clearCanvas();

            try {
                await QRCode.toCanvas(canvas, text, {
                    width: QR_SIZE,
                    margin: 2,
                    color: { dark: "#000000", light: "#ffffff" }
                });

                await desenharLogoCentral(LOGO_URL);

                btnBaixar.classList.remove("hidden");
                statusMsg.textContent = "QR Code gerado com sucesso.";

                generateArea.classList.add("hidden");
            } catch (err) {
                console.error(err);
                statusMsg.textContent = "Erro ao gerar o QR Code.";
            } finally {
                btnGerar.disabled = false;
                btnGerar.classList.remove("opacity-60", "cursor-not-allowed");
            }
        }

        function desenharLogoCentral(url) {
            return new Promise((resolve) => {
                const img = new Image();
                img.crossOrigin = "anonymous";

                img.onload = () => {
                    const logoSize = QR_SIZE * 0.28;
                    const x = (QR_SIZE - logoSize) / 2;
                    const y = (QR_SIZE - logoSize) / 2;

                    ctx.fillStyle = "#ffffff";
                    ctx.beginPath();
                    ctx.arc(x + logoSize / 2, y + logoSize / 2, logoSize / 2, 0, Math.PI * 2);
                    ctx.fill();

                    ctx.save();
                    ctx.beginPath();
                    ctx.arc(x + logoSize / 2, y + logoSize / 2, (logoSize / 2) * 0.88, 0, Math.PI * 2);
                    ctx.clip();

                    ctx.drawImage(
                        img,
                        x + logoSize * 0.12,
                        y + logoSize * 0.12,
                        logoSize - logoSize * 0.24,
                        logoSize - logoSize * 0.24
                    );

                    ctx.restore();
                    resolve();
                };

                img.onerror = () => {
                    statusMsg.textContent = "Logo não carregada.";
                    resolve();
                };

                img.src = url;
            });
        }

        function baixarPNG() {
            const link = document.createElement("a");
            link.download = "qrcode.png";
            link.href = canvas.toDataURL("image/png");
            link.click();
        }

        btnGerar.addEventListener("click", gerarQRCode);
        btnBaixar.addEventListener("click", baixarPNG);
    </script>
</body>
</html>
